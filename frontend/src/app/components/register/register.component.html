<h1 class="page-header">Register Page!</h1>

<form [formGroup]="registerForm" (ngSubmit)="onRegisterSubmit()">
    <div class="form-group">
        <label>Username</label>

        <input type="text" formControlName="username"
               [ngClass]="{'form-control': true,
                            'is-invalid':(registerForm.controls.username.errors && registerForm.controls.username.dirty),
                            'is-valid': !registerForm.controls.username.errors}"
        >

        <div *ngIf="registerForm.controls.username.errors?.required && registerForm.controls.username.dirty"
             class="invalid-feedback">
            This field is required
        </div>

        <div *ngIf="(registerForm.controls.username.errors?.minlength || registerForm.controls.username.errors?.maxlength) &&
               registerForm.controls.username.dirty" class="invalid-feedback">
            Minimun character is 3 and maximum is 20
        </div>

        <div *ngIf="registerForm.controls.username.errors?.validateUsername && registerForm.controls.username.dirty"
             class="invalid-feedback">
            Username must not have any special characters
        </div>
    </div>

    <div class="form-group">
        <label>Email address</label>

        <input type="email" formControlName="email"
               [ngClass]="{'form-control': true,
                           'is-invalid':(registerForm.controls.email.errors && registerForm.controls.email.dirty),
                           'is-valid': !registerForm.controls.email.errors}"
        >

        <div *ngIf="registerForm.controls.email.errors?.required && registerForm.controls.email.dirty"
             class="invalid-feedback">
            This field is required
        </div>

        <div *ngIf="(registerForm.controls.email.errors?.minlength || registerForm.controls.email.errors?.maxlength) &&
            registerForm.controls.email.dirty" class="invalid-feedback">
            Minimun character is 10 and maximum is 50
        </div>

        <div *ngIf="registerForm.controls.email.errors?.validateEmail && registerForm.controls.email.dirty"
             class="invalid-feedback">
            This must be valid email
        </div>
    </div>

    <div class="form-group">
        <label>Password</label>

        <input type="password" formControlName="password"
               [ngClass]="{'form-control': true,
                           'is-invalid':(registerForm.controls.password.errors && registerForm.controls.password.dirty),
                           'is-valid': !registerForm.controls.password.errors}"
        >
        <div *ngIf="registerForm.controls.password.errors?.required && registerForm.controls.password.dirty"
             class="invalid-feedback">
            This field is required
        </div>

        <div *ngIf="registerForm.controls.password.errors?.minlength && registerForm.controls.email.dirty"
             class="invalid-feedback">
            Minimun character is 8
        </div>

        <div *ngIf="registerForm.controls.password.errors?.validatePassword && registerForm.controls.password.dirty"
             class="invalid-feedback">
            Password must have least one uppercase, lowercase, special character and number
        </div>
    </div>

    <div class="form-group">
        <label>Confirm password</label>

        <input type="password" formControlName="confirmPassword"
               [ngClass]="{'form-control': true,
                           'is-invalid':(registerForm.controls.confirmPassword.errors && registerForm.controls.confirmPassword.dirty) ||
                           (registerForm.errors?.matchingPasswords && registerForm.controls.confirmPassword.dirty),
                           'is-valid': !registerForm.controls.confirmPassword.errors && !registerForm.errors?.matchingPasswords}"
        >

        <div
            *ngIf="registerForm.controls.confirmPassword.errors?.required && registerForm.controls.confirmPassword.dirty"
            class="invalid-feedback">
            This field is required
        </div>

        <div *ngIf="registerForm.errors?.matchingPasswords && registerForm.controls.confirmPassword.dirty"
             class="invalid-feedback">
            Password don't match
        </div>
    </div>

    <button [disabled]="!registerForm.valid" class="btn btn-primary" type="submit">Submit</button>
</form>

<hr>

<p>Username: {{ registerForm.controls.username.value }}</p>
<p>Email: {{ registerForm.controls.email.value }}</p>
<p>Password: {{ registerForm.controls.password.value }}</p>
